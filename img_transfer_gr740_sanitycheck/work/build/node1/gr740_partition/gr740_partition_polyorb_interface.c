/* File generated by kazoo for TASTE - do not edit */
#include "gr740_partition_polyorb_interface.h"

#include "receiver_vm_if.h"


void pro_receiver_image
      (const char *IN_buf_img_data, size_t size_IN_buf_img_data)

{
   extern process_package__taste_protected_object receiver_protected;
   __po_hi_protected_lock (receiver_protected.protected_id);
   receiver_image
      (IN_buf_img_data, size_IN_buf_img_data);

   __po_hi_protected_unlock (receiver_protected.protected_id);
}


// Required interfaces of function sender

// Required interface image in function sender
void vm_sender_image
        (const char *IN_buf_img_data, size_t size_IN_buf_img_data)

{
   __po_hi_task_id current_task = __po_hi_get_task_id();
   // sender_trigger calling thread
   if (gr740_partition_sender_trigger_k == current_task) {
      // puts("[TASTE] Sporadic call of image from thread gr740_partition_sender_trigger");
      __po_hi_request_t *request = __po_hi_get_request (); 
      __po_hi_copy_array(&(request->vars.sender_trigger_global_outport_receiver_image.sender_trigger_global_outport_receiver_image.buffer), 
      (void *)IN_buf_img_data, size_IN_buf_img_data); 
      request->vars.sender_trigger_global_outport_receiver_image.sender_trigger_global_outport_receiver_image.length = 
      size_IN_buf_img_data; 
      request->port = sender_trigger_global_outport_receiver_image; 
      __po_hi_gqueue_store_out(gr740_partition_sender_trigger_k, sender_trigger_local_outport_receiver_image, request); 
      __po_hi_send_output(gr740_partition_sender_trigger_k, sender_trigger_global_outport_receiver_image);

      return;
   }
   // calling threads: sender_trigger partition: gr740_partition
}

#include "receiver_vm_if.h"

void call_receiver_image (__po_hi_task_id sender_pid, dataview__rawdata_buffer_impl buf)

{
   (void)sender_pid; // sender id is not used for now

   receiver_image (buf.buffer, buf.length);
}
#include "sender_vm_if.h"

void call_sender_trigger (__po_hi_task_id sender_pid)

{
   (void)sender_pid; // sender id is not used for now

   sender_trigger();
}
