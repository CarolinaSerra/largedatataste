/* File generated by kazoo for TASTE - do not edit */
#include "gr740_partition_polyorb_interface.h"

// Required interfaces of function receiver

// Required interface testint in function receiver
void vm_receiver_testint
        (const char *IN_buf_int2, size_t size_IN_buf_int2)

{
   __po_hi_task_id current_task = __po_hi_get_task_id();
   // receiver_image calling thread
   if (gr740_partition_receiver_image_k == current_task) {
      // puts("[TASTE] Sporadic call of testint from thread gr740_partition_receiver_image");
      __po_hi_request_t *request = __po_hi_get_request (); 
      __po_hi_copy_array(&(request->vars.receiver_image_global_outport_sender_testint.receiver_image_global_outport_sender_testint.buffer), 
      (void *)IN_buf_int2, size_IN_buf_int2); 
      request->vars.receiver_image_global_outport_sender_testint.receiver_image_global_outport_sender_testint.length = 
      size_IN_buf_int2; 
      request->port = receiver_image_global_outport_sender_testint; 
      __po_hi_gqueue_store_out(gr740_partition_receiver_image_k, receiver_image_local_outport_sender_testint, request); 
      __po_hi_send_output(gr740_partition_receiver_image_k, receiver_image_global_outport_sender_testint);

      return;
   }
   // calling threads: receiver_image partition: gr740_partition
}

#include "receiver_vm_if.h"


void pro_receiver_image
      (const char *IN_buf_img_data, size_t size_IN_buf_img_data)

{
   extern process_package__taste_protected_object receiver_protected;
   __po_hi_protected_lock (receiver_protected.protected_id);
   receiver_image
      (IN_buf_img_data, size_IN_buf_img_data);

   __po_hi_protected_unlock (receiver_protected.protected_id);
}


// Required interfaces of function sender

// Required interface image in function sender
void vm_sender_image
        (const char *IN_buf_img_data, size_t size_IN_buf_img_data)

{
   __po_hi_task_id current_task = __po_hi_get_task_id();
   // sender_testint calling thread
   if (gr740_partition_sender_testint_k == current_task) {
      // puts("[TASTE] Sporadic call of image from thread gr740_partition_sender_testint");
      __po_hi_request_t *request = __po_hi_get_request (); 
      __po_hi_copy_array(&(request->vars.sender_testint_global_outport_receiver_image.sender_testint_global_outport_receiver_image.buffer), 
      (void *)IN_buf_img_data, size_IN_buf_img_data); 
      request->vars.sender_testint_global_outport_receiver_image.sender_testint_global_outport_receiver_image.length = 
      size_IN_buf_img_data; 
      request->port = sender_testint_global_outport_receiver_image; 
      __po_hi_gqueue_store_out(gr740_partition_sender_testint_k, sender_testint_local_outport_receiver_image, request); 
      __po_hi_send_output(gr740_partition_sender_testint_k, sender_testint_global_outport_receiver_image);

      return;
   }
   // sender_trigger calling thread
   if (gr740_partition_sender_trigger_k == current_task) {
      // puts("[TASTE] Sporadic call of image from thread gr740_partition_sender_trigger");
      __po_hi_request_t *request = __po_hi_get_request (); 
      __po_hi_copy_array(&(request->vars.sender_trigger_global_outport_receiver_image.sender_trigger_global_outport_receiver_image.buffer), 
      (void *)IN_buf_img_data, size_IN_buf_img_data); 
      request->vars.sender_trigger_global_outport_receiver_image.sender_trigger_global_outport_receiver_image.length = 
      size_IN_buf_img_data; 
      request->port = sender_trigger_global_outport_receiver_image; 
      __po_hi_gqueue_store_out(gr740_partition_sender_trigger_k, sender_trigger_local_outport_receiver_image, request); 
      __po_hi_send_output(gr740_partition_sender_trigger_k, sender_trigger_global_outport_receiver_image);

      return;
   }
   // calling threads: sender_testint, sender_trigger partition: gr740_partition
}

#include "sender_vm_if.h"


void pro_sender_testint
      (const char *IN_buf_int2, size_t size_IN_buf_int2)

{
   extern process_package__taste_protected_object sender_protected;
   __po_hi_protected_lock (sender_protected.protected_id);
   sender_testint
      (IN_buf_int2, size_IN_buf_int2);

   __po_hi_protected_unlock (sender_protected.protected_id);
}

#include "receiver_vm_if.h"

void call_receiver_image (__po_hi_task_id sender_pid, dataview__rawdata_buffer_impl buf)

{
   (void)sender_pid; // sender id is not used for now

   receiver_image (buf.buffer, buf.length);
}
#include "sender_vm_if.h"

void call_sender_testint (__po_hi_task_id sender_pid, dataview__myinteger_buffer_impl buf)

{
   (void)sender_pid; // sender id is not used for now

    extern process_package__taste_protected_object sender_protected;
   __po_hi_protected_lock (sender_protected.protected_id);
   sender_testint (buf.buffer, buf.length);
   __po_hi_protected_unlock (sender_protected.protected_id);
}
#include "sender_vm_if.h"

void call_sender_trigger (__po_hi_task_id sender_pid)

{
   (void)sender_pid; // sender id is not used for now

    extern process_package__taste_protected_object sender_protected;
   __po_hi_protected_lock (sender_protected.protected_id);
   sender_trigger();
   __po_hi_protected_unlock (sender_protected.protected_id);
}
