--  TASTE Concurrency View - Generated by Kazoo, do not edit manually
--  Generated by the template: ~/tool-src/kazoo/templates/concurrency_view/aadl_2_threads/system.tmplt

package Receiver_Image_Thread
public
   with Deployment;
   with Process_Package;
   with Dataview;

thread Receiver_Image
features
   INPORT_Image : in event data port DataView::RawData_Buffer.impl
      { Compute_Execution_Time =>  0 ms ..  0 ms;
        Queue_Size =>  1;
        Compute_Entrypoint_Source_Text => "call_receiver_image"; };
end Receiver_Image;

thread implementation Receiver_Image.others
properties
   Activate_Entrypoint_Source_Text => "init_receiver";
   Dispatch_Protocol                 => Sporadic;
   Period                            => 1 ms;
   Dispatch_Offset                   =>  0 ms;
   Compute_Execution_Time            =>  0 ms ..  0 ms;
   Stack_Size                        => 50000000 Bytes;
   Priority                          => 1;
end Receiver_Image.others;

end Receiver_Image_Thread;
package Sender_Trigger_Thread
public
   with Deployment;
   with Process_Package;
   with Dataview;

thread Sender_Trigger
features
   OUTPORT_Receiver_Image : out event data port DataView::RawData_Buffer.impl;
end Sender_Trigger;

thread implementation Sender_Trigger.others
properties
   Activate_Entrypoint_Source_Text => "init_sender";
   Compute_Entrypoint_Source_Text    => "call_sender_trigger";
   Dispatch_Protocol                 => Periodic;
   Period                            =>  200 ms;
   Dispatch_Offset                   =>  0 ms;
   Compute_Execution_Time            =>  0 ms ..  0 ms;
   Stack_Size                        => 50000000 Bytes;
   Priority                          => 1;
end Sender_Trigger.others;

end Sender_Trigger_Thread;

package Process_Package
public
   with arinc653;
   with Deployment;
   with DataView;
   with interfaceview::IV;
   with deploymentview::DV;
   with deploymentview::DV::node1;
   with Receiver_Image_Thread;
   with Sender_Trigger_Thread;
   with Ocarina_Processors_X86;

data TASTE_Protected
properties
   Concurrency_Control_Protocol => Protected_Access;
end TASTE_Protected;

data implementation TASTE_Protected.Object
properties
   Concurrency_Control_Protocol => Protected_Access;
end TASTE_Protected.Object;

--  Required by AIR to allow inter-partition communications
subprogram do_ports_polling
properties
   Source_Language => C;
   Source_Name     => "user_ports_polling";
   Source_Text     => ("air_polling.c");
end do_ports_polling;
thread Port_Poller
end    Port_Poller;

thread implementation Port_Poller.i
calls
   Mycalls: {
      P_Spg : subprogram do_ports_polling;
   };
properties
   Dispatch_Protocol => Periodic;
   Period            => 100 ms;
   Deadline          => 100 ms;
end Port_Poller.i;


processor node1_Board extends ocarina_processors_x86::x86
end node1_Board;

processor implementation node1_Board.final extends ocarina_processors_x86::x86.linux
end node1_Board.final;


process X86_Partition extends DeploymentView::DV::Node1::X86_Partition
end x86_partition;

process implementation X86_Partition.final
subcomponents
   receiver_protected : data TASTE_Protected.Object;
   
   sender_protected : data TASTE_Protected.Object;
   receiver_image : thread receiver_image_Thread::receiver_image.others;
   sender_trigger : thread sender_trigger_Thread::sender_trigger.others;
connections
   port Sender_Trigger.OUTPORT_Receiver_Image -> Receiver_Image.INPORT_Image;
end X86_Partition.final;

system DeploymentView
end DeploymentView;

system implementation DeploymentView.final
subcomponents
   X86_Partition : process X86_Partition.final;
   Node1_x86_linux : processor Node1_Board.final;
properties
   Actual_Processor_Binding => (reference (Node1_x86_linux)) applies to X86_Partition;
--  patchable area (do not remove this line):
end DeploymentView.final;

end Process_Package;

-- deploymenttview.final
